<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>KuangjuX(狂且) - 风声雨声读书声 声声入耳 家事国事天下事 事事关心</title><meta name="author" content="KuangjuX"><meta name="copyright" content="KuangjuX"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="狂且的人文及技术博客">
<!-- hexo-inject:begin --><!-- hexo-inject:end --><meta property="og:type" content="website">
<meta property="og:title" content="KuangjuX(狂且)">
<meta property="og:url" content="http://blog.kuangjux.top/page/3/">
<meta property="og:site_name" content="KuangjuX(狂且)">
<meta property="og:description" content="狂且的人文及技术博客">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://blog.kuangjux.top/img/KuangjuX.png">
<meta property="article:author" content="KuangjuX">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://blog.kuangjux.top/img/KuangjuX.png"><link rel="shortcut icon" href="/img/KuangjuX.png"><link rel="canonical" href="http://blog.kuangjux.top/page/3/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  ClickShowText: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2022-03-12 15:05:16'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="KuangjuX(狂且)" type="application/atom+xml"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/KuangjuX.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">73</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">49</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">8</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="/movies/"><i class="fa-fw video-camera"></i><span> Movies</span></a></div><div class="menus_item"><a class="site-page" href="/books/"><i class="fa-fw book"></i><span> Books</span></a></div></div></div></div><div id="body-wrap"><header class="full_page" id="page-header" style="background-image: url(/img/background.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">KuangjuX(狂且)</a></span><span id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="/movies/"><i class="fa-fw video-camera"></i><span> Movies</span></a></div><div class="menus_item"><a class="site-page" href="/books/"><i class="fa-fw book"></i><span> Books</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="site-info"><h1 id="site-title">KuangjuX(狂且)</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/KuangjuX" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/zhjyyjjmjy666@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/10/16/6-824-MapReduce/" title="6.824 MapReduce">     <img class="post_bg" src="https://github.com/KuangjuX/Blog-Images/blob/main/MapReduce.png?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="6.824 MapReduce"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/10/16/6-824-MapReduce/" title="6.824 MapReduce">6.824 MapReduce</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-10-16T13:43:13.000Z" title="Created 2021-10-16 21:43:13">2021-10-16</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="content"> <!-- hexo-inject:begin --><!-- hexo-inject:end -->Lab-1 MapReduce
之前的版本是用 goroutine 写的，写错了，重新梳理一下想法：
首先，Master 启动并初始化状态，然后等待 Worker 来请求，此时的 Master 并不知道有多少台 Worker 工作，因此他会维护一个 WorkerState 的数组，此时这个数组为空，当 Worker 来连接 Master 的时候，Master 在数组里为其加入状态，并为其添加 ID 号，并将其作为结果返回 Worker，此时 Worker 就知道自己的 ID 号了，在之后的请求中 Worker 将会带着这个 ID 号以便 Master 维护 Worker 的状态。
当 Worker 每次向 Master 请求并拿到 task 的时候，Worker 将会开启一个定时器来记录工作时间是否超时，倘若超时的话则说明 Worker 已经崩溃了，此时则将当前 Worker 运行的任务标记为 Idle， 当其他 Worker 请求的时候发送给其他 Worker。计时器计划采用 goroutine 来实现，为每一个 Worker 维护一个计时器，使用 channel 来发送消息，表示 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/07/07/The-forest-in-Norway/" title="挪威的森林">     <img class="post_bg" src="https://github.com/KuangjuX/Blog-Images/blob/main/The-forests-in-Norway.jpg?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="挪威的森林"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/07/07/The-forest-in-Norway/" title="挪威的森林">挪威的森林</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-07-07T13:07:40.000Z" title="Created 2021-07-07 21:07:40">2021-07-07</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E8%AF%BB%E4%B9%A6/">读书</a></span></div><div class="content">这本书是我去南京旅游时候闲暇时读的，在乘坐高铁或者待在酒店里拿出来看一下，总共花了3天的时间看完。细细想来，我已经有一段时间没有安安静静地完整看完一本小说了，从前总将《挪威的森林》当做是一本严肃文学小说，因此在买了之后很长一段时间都没有看，但当我真正读完之后发觉《挪威的森林》虽然不是通俗的文学小说，但也不必将其当做严肃文学来看待，它更像是作者在中年时对于少年的回忆与反思。
村上在写完这本书后将其书称为“百分百的恋爱小说”，但据他自己所说，称其为恋爱小说其实仅仅是为了招徕顾客所用，事实上他所表达的是“百分百的现实小说”，因为在腰封上加上这个字眼不太合适，因此就选择了将恋爱小说作为醒目的标题来吸引眼球。但事实上，这本小说真的仅仅是讲的“恋爱故事”吗？依我来看倒不见得，与其将它视为是一本恋爱小说，倒不如将其看作是一部成长小说，恋爱并非是最重要的，而是活的人能够在死去的人身上得到什么，从而更加坚强地活下去。
在本书中，“性”是非常浓墨重彩书写的一部分，而书中的“性”与“爱”也是完全分离的，异性间发生性关系但互相之间却完全没有情感。这一点被很多人认为不应将《挪威的森林》看做是现实小说，因为将性与 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/07/02/implement-FAT32-FS-step-by-step/" title="使用Rust实现FAT32文件系统">     <img class="post_bg" src="https://github.com/KuangjuX/Blog-Images/blob/main/computer-backtrace.jpg?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用Rust实现FAT32文件系统"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/07/02/implement-FAT32-FS-step-by-step/" title="使用Rust实现FAT32文件系统">使用Rust实现FAT32文件系统</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-07-02T14:25:19.000Z" title="Created 2021-07-02 22:25:19">2021-07-02</time></span></div><div class="content"> FAT文件系统知识概览
文件，其实就是数据。数据在计算机内以 0/1 表示，最基本的单位是bit（比特）。8 bit = 1 Byte，1024 Byte = 1 KB，1024 KB = 1 MB，如此如此。文件内容也是若干01串的组合。在读写文件的时候，我们会调用 kernel 中的函数 read()/write()，它们接受文件的描述符，然后读/写指定长度的数据。所有数据也都是 0/1 的形式，只不过我们在运用这些函数的时候，这些数据被转成了更加高级的表示，例如 char，int 或者其他类型。
 磁盘是什么
现在的硬盘容量已经达到了TB的级别，它们的物理实现与原理又是怎样的呢？我就简单地带过一下，具体细节可以去 How a hard disk work?，里面很简洁地说明了他的工作原理。
磁盘最重要的就是扇面，扇面上面有一圈圈的磁道，这些磁道中储存着信息。如何进行读写呢？物理层面上，是通过用磁头改变磁道中每个存储单元的极性来实现的。
磁盘中的物理储存单位叫做sector(扇区)，而文件系统中一个储存单位叫做 block (FAT 系统叫 cluster)，每一个 cluste ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/06/09/xv6-rust-lock/" title="xv6-rust锁机制">     <img class="post_bg" src="https://github.com/KuangjuX/Blog-Images/blob/main/shutdown.jpg?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="xv6-rust锁机制"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/06/09/xv6-rust-lock/" title="xv6-rust锁机制">xv6-rust锁机制</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-06-09T10:29:39.000Z" title="Created 2021-06-09 18:29:39">2021-06-09</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="content"> 锁
 自旋锁（Spinlock）
我们实现的自旋锁的定义如下：
1234567#[derive(Debug,Default)]pub struct Spinlock&lt;T: ?Sized&gt;&#123;    locked:AtomicBool,    name: &amp;&#x27;static str,    cpu_id: Cell&lt;isize&gt;,    data:UnsafeCell&lt;T&gt;,&#125;
locked由core::atmoic::AtomicBool来声明，这是一个原子布尔类型，即这是一个线程安全的值。而data的值则有UnsafeCell来包裹（wrap），这表明将有一些不安全的操作将作用在内部包裹的值中，使用该类型我们将没有办法获取内部变量的可变引用。我们可以通过.get()方法获取*mut T来对其内部进行操作。
对于一个锁变量，我们需要对其实现acquire()和release()方法：
1234567891011121314151617181920212223242526272829pub fn acquire(&a ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/06/09/Mini-MIPS-32-bits-CPU/" title="Mini MIPS 32-bits CPU">     <img class="post_bg" src="https://github.com/KuangjuX/Blog-Images/blob/main/wallhaven-492jmd.png?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Mini MIPS 32-bits CPU"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/06/09/Mini-MIPS-32-bits-CPU/" title="Mini MIPS 32-bits CPU">Mini MIPS 32-bits CPU</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-06-09T08:30:17.000Z" title="Created 2021-06-09 16:30:17">2021-06-09</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="content"> Mini MIPS 32-bits CPU
32位单周期MIPS指令集CPU，仅仅支持10条指令：

lw, sw
lui, ori, addiu
addu, slt
beq, bne, j

具体实现可见：Mini-Mips32
 部件构成
顶层模块：

CPU模块：

控制单元：

数据通路：

 控制信号



指令
reg_write
reg_dst
alu_src
branch
mem_write
mem_to_reg
aluop
jump
select_imm




R-type
1
1
0
00
0
0
100
0
0


beq
0
x
0
01
0
x
010
0
0


bne
0
x
0
10
0
x
010
0
0


j
0
x
x
00
0
x
xxx
1
0


addiu
1
0
1
00
0
0
000
0
0


ori
1
0
1
00
0
0
011
0
0


lui
1
0
1
00
0
0
100
0
1


lw
1
0
1
00
0
1
000
0
0


sw
0
x
1
00
1
x
000
0
0


invalid_op
x ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/06/06/hero-die-now/" title="武侠已死">     <img class="post_bg" src="https://github.com/KuangjuX/Blog-Images/blob/main/wallhaven-95kepd.jpg?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="武侠已死"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/06/06/hero-die-now/" title="武侠已死">武侠已死</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-06-06T11:16:56.000Z" title="Created 2021-06-06 19:16:56">2021-06-06</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E6%9D%82%E6%96%87/">杂文</a></span></div><div class="content">现在再去看武侠小说时，很少再有年少时的那种兴奋感了，这倒不是说我厌恶读武侠小说或者无法在读武侠小说的过程中取得快感了。只是因为我在读小说的过程中更加考虑小说的合理性。比如我会因为某些概率很小的时间在主角出现时接二连三的发生而感到很不适。有时为了逃避这种不适感我会选择掩卷不读。相反在我年少时我完全不会怀疑事件合理与否，看到主角武功大进、扬眉吐气、谈情说爱时（？）都会眉飞色舞。
在知乎看到了这样一篇文章，里面的观点很有意思，他说江南的《龙族》越写越差强人意，原因是因为江南的“艺术”已死，他还举了一个刘慈欣《赡养人类》中的一个例子：
一个贫穷的画家拒绝有钱人赠送的钞票，他永远待在一个破解的棚子里面，不管画作画的有多好，当别人想去买的时候，他总是漠不关心地说看着给吧，且每次仅抽取两张钞票，而他的理由是：

我的画都是描写贫穷与死亡的，如果一夜之间成了百万富翁，我的艺术就死了。    —《赡养人类》

而在文章的作者给出江南“艺术死亡”的分析是因为江南结婚之后，婚姻幸福、家庭美好、生活顺遂，再也无法遇到生活的不顺与求之不得的感情，他的笔下也就无法刻画出那种细腻的情感了。当他为celina学姐黯然 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/05/21/sad-in-521/" title="520与伤春悲秋与杂感">     <img class="post_bg" src="https://github.com/KuangjuX/Blog-Images/blob/main/wallhaven-x16oxo.jpg?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="520与伤春悲秋与杂感"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/05/21/sad-in-521/" title="520与伤春悲秋与杂感">520与伤春悲秋与杂感</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-05-21T14:55:57.000Z" title="Created 2021-05-21 22:55:57">2021-05-21</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E6%9D%82%E6%96%87/">杂文</a></span></div><div class="content">每次到了这种日子，我总会有一些特殊的感觉。看着别人在QQ空间、朋友圈上形形色色的脱单、分手、秀恩爱之后，我心里总有一些不舒服的滋味。他们的经历好丰富，可是为什么我不能拥有这种经历呢？是啊，尽管在平时，我对这种无聊又琐碎的恋爱嗤之以鼻，认为这种事情会极大地消耗人的精力与耐力，使人会变成不自由的恋爱的附庸。可是，我又何尝不是在某一时刻，对恋爱之时的美好充满幻想呢？
二十年来，我从未尝试去谈过一场恋爱，仅有的也仅仅是无疾而终的暗恋，在无眠的夜里达到高潮而又随着时间的流逝而渐渐淡忘。这就像我曾经疯狂地迷恋上写小说一样，我一度迷恋上写小说但却因为学业被迫放弃，其中经历的思想斗争与辗转反侧十分痛苦，甚至让我一度到达了抑郁的程度。然而随着时间流逝，以前所苦苦追求的，到现在看来都像是笑话一样。那些暗恋过的过往，也云烟散去，那些我喜欢过的女孩子原来也是那么普通和拥有那么多的缺点，原来只是我的头昏脑热罢了。我不看甚至屏蔽了她们的朋友圈，这或许是由盛转衰的报复性行为吧，从西施到普通人还是有很大落差的。
在《霍乱时期的爱情》里记载了一段伟大的恋爱，延续了60多年的暗恋，这虽然很伟大和令人动容，但对我而言，这更 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/05/03/xv6-rust-interrupt/" title="xv6-rust中断机制">     <img class="post_bg" src="https://github.com/KuangjuX/Blog-Images/blob/main/shutdown.jpg?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="xv6-rust中断机制"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/05/03/xv6-rust-interrupt/" title="xv6-rust中断机制">xv6-rust中断机制</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-05-03T08:03:36.000Z" title="Created 2021-05-03 16:03:36">2021-05-03</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="content"> 内核中断机制
 中断代理
1234// delegate all interrupts and exceptions to supervisor mode.    medeleg::write(0xffff);    mideleg::write(0xffff);    sie::write(sie::read() | sie::SIE::SEIE as usize | sie::SIE::STIE as usize | sie::SIE::SSIE as usize);
首先，我们在bootloader阶段进行中断代理，此时，我们仍处在M特权级，而我们的内核需要运行在S特权级。默认情况下，所有的陷阱中断都会在M态进行处理，因此我们需要将其代理到S态以便我们进行处理。
这里首先简要介绍一下medeleg(machine exception delegation register),mideleg(machine interrupt delegation register)以及sie（supervisor interrupt register）寄存器的作用：
medeleg和midel ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/04/14/shutdown-without-SBI-in-OS/" title="xv6-rust关机机制">     <img class="post_bg" src="https://github.com/KuangjuX/Blog-Images/blob/main/shutdown.jpg?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="xv6-rust关机机制"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/04/14/shutdown-without-SBI-in-OS/" title="xv6-rust关机机制">xv6-rust关机机制</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-04-14T07:59:19.000Z" title="Created 2021-04-14 15:59:19">2021-04-14</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="content">之前在做rCore的时候发现里面的panic()会直接调用sbi_call直接实现shutdown()。由于这次我自己写的OS自己写的bootloader没有使用SBI，于是想去自己去实现一个shutdown的功能。
由于我用的是QEMU来做硬件模拟，于是我去看了一下RustSBI关于shutdown的处理部分：
1234567891011121314151617181920212223242526pub fn handle_ecall(extension: usize, function: usize, param: [usize; 5]) -&gt; SbiRet &#123;    match extension &#123;        EXTENSION_RFENCE =&gt; rfence::handle_ecall_rfence(function, param[0], param[1], param[2], param[3], param[4]),        EXTENSION_TIMER =&gt; match () &#123;            #[cf ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/02/19/LeetCode-52/" title="LeetCode-52-N皇后II">     <img class="post_bg" src="https://github.com/KuangjuX/Blog-Images/blob/main/Leetcode.jpg?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="LeetCode-52-N皇后II"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/02/19/LeetCode-52/" title="LeetCode-52-N皇后II">LeetCode-52-N皇后II</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-02-19T12:33:46.000Z" title="Created 2021-02-19 20:33:46">2021-02-19</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="content"> Description:
n 皇后问题 研究的是如何将 n 个皇后放置在 n×n 的棋盘上，并且使皇后彼此之间不能相互攻击。
给你一个整数 n ，返回 n 皇后问题 不同的解决方案的数量。
 Examples:
示例 1：

123输入：n &#x3D; 4输出：2解释：如上图所示，4 皇后问题存在两个不同的解法。
示例 2：
12输入：n &#x3D; 1输出：1
 Solution:
1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950func totalNQueens(n int) int &#123;    res := 0    board := make([][]int, n)    for i:=0; i&lt;n; i++&#123;        board[i] = make([]int, n)    &#125;    dfs(0, &amp;board, &amp;res, n)    return res&#125;func df ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/2/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/4/"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/KuangjuX.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">KuangjuX</div><div class="author-info__description">狂且的人文及技术博客</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">73</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">49</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">8</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/KuangjuX"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/KuangjuX" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/zhjyyjjmjy666@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div></div><div class="card-widget card-announcement"><div class="card-content"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>Announcement</span></div><div class="announcement_content">风声雨声读书声，声声入耳 </br> 家事国事天下事，事事关心</div></div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/03/12/Cache/" title="高速缓存技术(Cache)"><img src="https://github.com/KuangjuX/Blog-Images/blob/main/circuit2.jpg?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="高速缓存技术(Cache)"/></a><div class="content"><a class="title" href="/2022/03/12/Cache/" title="高速缓存技术(Cache)">高速缓存技术(Cache)</a><time datetime="2022-03-12T06:27:41.000Z" title="Created 2022-03-12 14:27:41">2022-03-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/03/05/Chisel-learning/" title="Chisel 学习笔记"><img src="https://github.com/KuangjuX/Blog-Images/blob/main/circuit2.jpg?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Chisel 学习笔记"/></a><div class="content"><a class="title" href="/2022/03/05/Chisel-learning/" title="Chisel 学习笔记">Chisel 学习笔记</a><time datetime="2022-03-05T13:31:07.000Z" title="Created 2022-03-05 21:31:07">2022-03-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/03/04/essay/" title="随笔（一）"><img src="https://github.com/KuangjuX/Blog-Images/blob/main/book1.jpg?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="随笔（一）"/></a><div class="content"><a class="title" href="/2022/03/04/essay/" title="随笔（一）">随笔（一）</a><time datetime="2022-03-04T14:22:51.000Z" title="Created 2022-03-04 22:22:51">2022-03-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/03/04/ILP/" title="指令级并行技术"><img src="https://github.com/KuangjuX/Blog-Images/blob/main/circuit1.jpg?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="指令级并行技术"/></a><div class="content"><a class="title" href="/2022/03/04/ILP/" title="指令级并行技术">指令级并行技术</a><time datetime="2022-03-04T14:14:04.000Z" title="Created 2022-03-04 22:14:04">2022-03-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/02/21/TLB-MMU/" title="TLB MMU 笔记（基于 MIPS）"><img src="https://github.com/KuangjuX/Blog-Images/blob/main/circuit1.jpg?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="TLB MMU 笔记（基于 MIPS）"/></a><div class="content"><a class="title" href="/2022/02/21/TLB-MMU/" title="TLB MMU 笔记（基于 MIPS）">TLB MMU 笔记（基于 MIPS）</a><time datetime="2022-02-21T14:54:04.000Z" title="Created 2022-02-21 22:54:04">2022-02-21</time></div></div></div></div></div><div class="card-widget card-categories"><div class="card-content"><div class="item-headline"><i class="fas fa-folder-open"></i><span>Categories</span></div><ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%8E%86%E5%8F%B2/"><span class="card-category-list-name">历史</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%B0%8F%E8%AF%B4/"><span class="card-category-list-name">小说</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%8A%80%E6%9C%AF/"><span class="card-category-list-name">技术</span><span class="card-category-list-count">52</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%97%85%E8%A1%8C/"><span class="card-category-list-name">旅行</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%9D%82%E6%96%87/"><span class="card-category-list-name">杂文</span><span class="card-category-list-count">9</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E7%94%9F%E6%B4%BB/"><span class="card-category-list-name">生活</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E7%94%B5%E5%BD%B1/"><span class="card-category-list-name">电影</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E8%AF%BB%E4%B9%A6/"><span class="card-category-list-name">读书</span><span class="card-category-list-count">3</span></a></li>
            
            </ul></div></div><div class="card-widget card-tags"><div class="card-content"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/6-824/" style="font-size: 1.14em; color: #999b9d">6.824</a> <a href="/tags/6-S081/" style="font-size: 1.26em; color: #999fa8">6.S081</a> <a href="/tags/ARM/" style="font-size: 1.1em; color: #999">ARM</a> <a href="/tags/C-C/" style="font-size: 1.38em; color: #99a4b4">C/C++</a> <a href="/tags/CAAQA/" style="font-size: 1.1em; color: #999">CAAQA</a> <a href="/tags/CPU/" style="font-size: 1.14em; color: #999b9d">CPU</a> <a href="/tags/CSAPP/" style="font-size: 1.34em; color: #99a3b0">CSAPP</a> <a href="/tags/Chisel/" style="font-size: 1.1em; color: #999">Chisel</a> <a href="/tags/Docker/" style="font-size: 1.1em; color: #999">Docker</a> <a href="/tags/FPGA/" style="font-size: 1.1em; color: #999">FPGA</a> <a href="/tags/Javascript/" style="font-size: 1.1em; color: #999">Javascript</a> <a href="/tags/Laravel/" style="font-size: 1.14em; color: #999b9d">Laravel</a> <a href="/tags/Leetcode/" style="font-size: 1.26em; color: #999fa8">Leetcode</a> <a href="/tags/Linux/" style="font-size: 1.3em; color: #99a1ac">Linux</a> <a href="/tags/MIPS/" style="font-size: 1.14em; color: #999b9d">MIPS</a> <a href="/tags/Nginx/" style="font-size: 1.1em; color: #999">Nginx</a> <a href="/tags/PHP/" style="font-size: 1.1em; color: #999">PHP</a> <a href="/tags/RISC-V/" style="font-size: 1.46em; color: #99a7bb">RISC -V</a> <a href="/tags/Rust/" style="font-size: 1.42em; color: #99a6b7">Rust</a> <a href="/tags/Scala/" style="font-size: 1.1em; color: #999">Scala</a> <a href="/tags/go/" style="font-size: 1.14em; color: #999b9d">go</a> <a href="/tags/leetcode/" style="font-size: 1.1em; color: #999">leetcode</a> <a href="/tags/rCore/" style="font-size: 1.3em; color: #99a1ac">rCore</a> <a href="/tags/xv6-rust/" style="font-size: 1.18em; color: #999ca1">xv6-rust</a> <a href="/tags/%E4%BA%BA%E7%94%9F/" style="font-size: 1.38em; color: #99a4b4">人生</a> <a href="/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" style="font-size: 1.1em; color: #999">函数式编程</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/" style="font-size: 1.14em; color: #999b9d">分布式系统</a> <a href="/tags/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/" style="font-size: 1.26em; color: #999fa8">后端开发</a> <a href="/tags/%E5%90%90%E6%A7%BD/" style="font-size: 1.14em; color: #999b9d">吐槽</a> <a href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F/" style="font-size: 1.1em; color: #999">嵌入式系统</a> <a href="/tags/%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/" style="font-size: 1.1em; color: #999">年终总结</a> <a href="/tags/%E5%B9%B6%E5%8F%91/" style="font-size: 1.1em; color: #999">并发</a> <a href="/tags/%E5%BC%82%E6%AD%A5IO/" style="font-size: 1.1em; color: #999">异步IO</a> <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 1.5em; color: #99a9bf">操作系统</a> <a href="/tags/%E6%95%99%E8%82%B2/" style="font-size: 1.1em; color: #999">教育</a> <a href="/tags/%E6%96%87%E5%AD%A6/" style="font-size: 1.22em; color: #999ea4">文学</a> <a href="/tags/%E6%97%85%E8%A1%8C/" style="font-size: 1.1em; color: #999">旅行</a> <a href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 1.18em; color: #999ca1">服务器</a> <a href="/tags/%E6%9D%82%E8%AE%BA/" style="font-size: 1.22em; color: #999ea4">杂论</a> <a href="/tags/%E6%B1%87%E7%BC%96/" style="font-size: 1.18em; color: #999ca1">汇编</a></div></div></div><div class="card-widget card-archives"><div class="card-content"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/03/"><span class="card-archive-list-date">March 2022</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/02/"><span class="card-archive-list-date">February 2022</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/01/"><span class="card-archive-list-date">January 2022</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/11/"><span class="card-archive-list-date">November 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/10/"><span class="card-archive-list-date">October 2021</span><span class="card-archive-list-count">7</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/07/"><span class="card-archive-list-date">July 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/06/"><span class="card-archive-list-date">June 2021</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/05/"><span class="card-archive-list-date">May 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item more is-center"><a class="card-archive-list-link-more" href="/archives/">
              <span>More</span><i class="fas fa-angle-right"  ></i></a></li></ul></div></div><div class="card-widget card-webinfo"><div class="card-content"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">73</div></div><div class="webinfo-item"><div class="item-name">UV :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">PV :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2022-03-12T07:05:15.974Z"></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By KuangjuX</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="icp"><a><img class="icp-icon" src="/img/icp.png" alt="ICP"/><span>津ICP备20003770号</span></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><div class="js-pjax"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></div><!-- hexo-inject:begin --><!-- hexo-inject:end --></body></html>