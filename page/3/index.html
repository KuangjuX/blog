<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>KuangjuX(狂且) - 风声雨声读书声 声声入耳 家事国事天下事 事事关心</title><meta name="author" content="KuangjuX"><meta name="copyright" content="KuangjuX"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="狂且的人文及技术博客">
<!-- hexo-inject:begin --><!-- hexo-inject:end --><meta property="og:type" content="website">
<meta property="og:title" content="KuangjuX(狂且)">
<meta property="og:url" content="http://blog.kuangjux.top/page/3/">
<meta property="og:site_name" content="KuangjuX(狂且)">
<meta property="og:description" content="狂且的人文及技术博客">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://blog.kuangjux.top/img/KuangjuX.png">
<meta property="article:author" content="KuangjuX">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://blog.kuangjux.top/img/KuangjuX.png"><link rel="shortcut icon" href="/img/KuangjuX.png"><link rel="canonical" href="http://blog.kuangjux.top/page/3/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  ClickShowText: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2021-10-22 21:28:15'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="KuangjuX(狂且)" type="application/atom+xml"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/KuangjuX.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">57</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">40</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">8</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="/movies/"><i class="fa-fw video-camera"></i><span> Movies</span></a></div><div class="menus_item"><a class="site-page" href="/books/"><i class="fa-fw book"></i><span> Books</span></a></div></div></div></div><div id="body-wrap"><header class="full_page" id="page-header" style="background-image: url(/img/background.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">KuangjuX(狂且)</a></span><span id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="/movies/"><i class="fa-fw video-camera"></i><span> Movies</span></a></div><div class="menus_item"><a class="site-page" href="/books/"><i class="fa-fw book"></i><span> Books</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="site-info"><h1 id="site-title">KuangjuX(狂且)</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/KuangjuX" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/zhjyyjjmjy666@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/02/19/rCore-Lab-6/" title="rCore Lab-6">     <img class="post_bg" src="https://github.com/KuangjuX/Blog-Images/blob/main/Rust.png?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="rCore Lab-6"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/02/19/rCore-Lab-6/" title="rCore Lab-6">rCore Lab-6</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-02-19T12:01:28.000Z" title="Created 2021-02-19 20:01:28">2021-02-19</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="content"></div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/02/19/rCore-Lab-5/" title="rCore Lab-5">     <img class="post_bg" src="https://github.com/KuangjuX/Blog-Images/blob/main/Rust.png?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="rCore Lab-5"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/02/19/rCore-Lab-5/" title="rCore Lab-5">rCore Lab-5</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-02-19T12:01:16.000Z" title="Created 2021-02-19 20:01:16">2021-02-19</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="content"></div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/02/14/rCore-Lab-4/" title="rCore Lab-4">     <img class="post_bg" src="https://github.com/KuangjuX/Blog-Images/blob/main/Rust.png?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="rCore Lab-4"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/02/14/rCore-Lab-4/" title="rCore Lab-4">rCore Lab-4</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-02-14T07:39:39.000Z" title="Created 2021-02-14 15:39:39">2021-02-14</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="content"> <!-- hexo-inject:begin --><!-- hexo-inject:end -->实验四（上）：线程
 实验题


原理：线程切换之中，页表是何时切换的？页表的切换会不会影响程序 / 操作系统的运行？为什么？
页表是在 Process::prepare_next_thread() 中调用 Thread::prepare()，其中换入了新线程的页表。
它不会影响执行，因为在中断期间是操作系统正在执行，而操作系统所用到的内核线性映射是存在于每个页表中的。


设计：如果不使用 sscratch 提供内核栈，而是像原来一样，遇到中断就直接将上下文压栈，请举出（思路即可，无需代码）：


一种情况不会出现问题


一种情况导致异常无法处理（指无法进入 handle_interrupt）


一种情况导致产生嵌套异常（指第二个异常能够进行到调用 handle_interrupt，不考虑后续执行情况）


一种情况导致一个用户进程（先不考虑是怎么来的）可以将自己变为内核进程，或以内核态执行自己的代码


只运行一个非常善意的线程，比如 loop &#123;&#125;


线程把自己的 sp 搞丢了，比如 mv sp, x0。此时无法保存寄存器，也没有能够支持操作系统正常运 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/02/10/rCore-Lab-3/" title="rCore Lab-3">     <img class="post_bg" src="https://github.com/KuangjuX/Blog-Images/blob/main/Rust.png?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="rCore Lab-3"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/02/10/rCore-Lab-3/" title="rCore Lab-3">rCore Lab-3</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-02-10T09:01:43.000Z" title="Created 2021-02-10 17:01:43">2021-02-10</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="content">
 实验三 虚实地址转换
 实验题
1.原理： 原理：在 os/src/entry.asm 中，boot_page_table 的意义是什么？当跳转执行 rust_main 时，不考虑缓存，硬件通过哪些地址找到了 rust_main 的第一条指令？
更改后的entry.asm如下所示：
12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061# 操作系统启动时所需的指令以及字段## 我们在 linker.ld 中将程序入口设置为了 _start，因此在这里我们将填充这个标签# 它将会执行一些必要操作，然后跳转至我们用 rust 编写的入口函数## 关于 RISC-V 下的汇编语言，可以参考 https:&#x2F;&#x2F;github.com&#x2F;riscv&#x2F;riscv-asm-manual&#x2F;blob&#x2F;master&#x2F;riscv-asm.md# %hi 表示取 [12,3 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/02/08/rCore-Lab-2/" title="rCore Lab-2">     <img class="post_bg" src="https://github.com/KuangjuX/Blog-Images/blob/main/Rust.png?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="rCore Lab-2"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/02/08/rCore-Lab-2/" title="rCore Lab-2">rCore Lab-2</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-02-08T03:41:12.000Z" title="Created 2021-02-08 11:41:12">2021-02-08</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="content"> 实验二：内存分配
 实验题
1.原理：.bss字段是什么含义？为什么我们要将动态分配的内存（堆）空间放在 .bss 字段？
.bss段：未初始化的全局和静态变量，以及所有被初始化为0的全局或静态变量，在目标文件中这个这个节不占据实际的空间，它仅仅是一个占位符。目标文件格式区分已初始化和未初始化变量是为了空间效率：在目标文件中，未初始化变量不需要占据任何实际的磁盘空间。运行时，在内存中分配这些变量，初始化值为0。
.bss段放堆空间，实际并不是必须的——我们完全可以随意指定一段可以访问的内存空间。不过，在代码中用全局变量来表示堆并将其放在.bss段，是一个很简单的实现：这样堆空间就包含在内核的二进制数据之中了，而自KERNEL_END_ADDRESS以后的空间就可以给进程使用。
2.分析：我们在动态内存分配中实现了一个堆，它允许我们在内核代码中使用动态分配的内存，例如 Vec、 Box 等。那么，如果我们在实现这个堆的过程中使用 Vec 而不是 [u8]，会出现什么结果？

无法编译？
运行时错误？
正常运行？

会发生死锁。使用Vec会向堆中申请内存，而Allocator也需要向堆内 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/02/07/rCore-Lab-1/" title="rCore Lab-1">     <img class="post_bg" src="https://github.com/KuangjuX/Blog-Images/blob/main/Rust.png?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="rCore Lab-1"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/02/07/rCore-Lab-1/" title="rCore Lab-1">rCore Lab-1</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-02-07T07:25:40.000Z" title="Created 2021-02-07 15:25:40">2021-02-07</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="content"> 实验一： 中断
 实验题：
1.原理：在rust_main函数中，执行ebreak命令后至函数结束前，sp寄存器的值是怎样变化的？
在rust_main函数中执行ebreak进入中断，首先需要在栈上开辟Context所需空间，即将栈顶（即sp寄存器）减去 34*8 bits。随后在__restore中恢复了sp寄存器中位置。
2.分析：如果去掉 rust_main 后的 panic 会发生什么，为什么？
去掉rust_main后的panic后程序将不会立刻返回。执行ebreak函数后进入到interrupt_handler函数中，判断为断点后进入breakpoint函数进行处理，在breakpoint函数中打印出断点位置并将sepc寄存器+2后返回，调用__restore函数恢复所有寄存器，并跳转至Context中sepc的位置上，即会回到entry.asm中，此时entry.asm函数后并未做任何处理。
3.实验：
I. 如果程序访问不存在的地址，会得到 Exception::LoadFault。模仿捕获 ebreak 和时钟中断的方法，捕获 LoadFault（之后 panic  ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/01/04/%E4%B8%80%E4%B8%AA%E5%85%B3%E4%BA%8EC%E8%AF%AD%E8%A8%80%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E7%9A%84%E8%AF%AF%E5%8C%BA/" title="一个关于C语言内存分配的误区">     <img class="post_bg" src="https://github.com/KuangjuX/Blog-Images/blob/main/C.jpg?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="一个关于C语言内存分配的误区"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/01/04/%E4%B8%80%E4%B8%AA%E5%85%B3%E4%BA%8EC%E8%AF%AD%E8%A8%80%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E7%9A%84%E8%AF%AF%E5%8C%BA/" title="一个关于C语言内存分配的误区">一个关于C语言内存分配的误区</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-01-04T03:55:43.000Z" title="Created 2021-01-04 11:55:43">2021-01-04</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="content"> 起源
事情是这样的，我在编写一段Unicode解析的代码时，需要先判断输入的Unicode后面从’\u’后是否为4位16进制数，如果是的话，就将这几位复制到一段字符串中并进行解析，如果不是的话则抛出异常。
这段代码如下：
123456789char *high = NULL, *low = NULL;   p = charcpy(p, high);   if(!p)return NULL;   if(*p == &#x27;\\&#x27;)&#123;       p++;       p = charcpy(p, low);       if(!p)return NULL;   &#125;
其中，charcpy函数的代码如下：
1234567891011121314151617static const char* charcpy(const char* p, char* target)&#123;    target = (char *)malloc(5 * sizeof(char));    int len;    for(len = 0; len &lt; 4; len++ ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/12/26/xv6-bigger-files/" title="xv6 Bigger Files">     <img class="post_bg" src="https://github.com/KuangjuX/Blog-Images/blob/main/operator-system.jpg?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="xv6 Bigger Files"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/12/26/xv6-bigger-files/" title="xv6 Bigger Files">xv6 Bigger Files</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2020-12-26T06:32:06.000Z" title="Created 2020-12-26 14:32:06">2020-12-26</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="content"> Introduction
In this assignment you’ll increase the maximum size of an xv6 file. Currently xv6 files are limited to 140 sectors, or 71,680 bytes. This limit comes from the fact that an xv6 inode contains 12 “direct” block numbers and one “singly-indirect” block number, which refers to a block that holds up to 128 more block numbers, for a total of 12+128=140. You’ll change the xv6 file system code to support a “doubly-indirect” block in each inode, containing 128 addresses of singly-indirect bl ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/12/25/xv6-System-Call/" title="xv6 System Call">     <img class="post_bg" src="https://github.com/KuangjuX/Blog-Images/blob/main/operator-system.jpg?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="xv6 System Call"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/12/25/xv6-System-Call/" title="xv6 System Call">xv6 System Call</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2020-12-25T03:06:05.739Z" title="Created 2020-12-25 11:06:05">2020-12-25</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="content"> Part One: System call tracing
 Introduction:
Your first task is to modify the xv6 kernel to print out a line for each system call invocation. It is enough to print the name of the system call and the return value; you don’t need to print the system call arguments.
When you’re done, you should see output like this when booting xv6:
1234567...fork -&gt; 2exec -&gt; 0open -&gt; 3close -&gt; 0write -&gt; 1write -&gt; 1
That’s init forking and execing sh, sh making sure only two file descriptors are ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/12/22/Hate-exam/" title="我为什么讨厌考试">     <img class="post_bg" src="https://github.com/KuangjuX/Blog-Images/blob/main/hate-exams.jpg?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="我为什么讨厌考试"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/12/22/Hate-exam/" title="我为什么讨厌考试">我为什么讨厌考试</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2020-12-22T11:50:59.984Z" title="Created 2020-12-22 19:50:59">2020-12-22</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E6%9D%82%E6%96%87/">杂文</a></span></div><div class="content">为什么我讨厌考试？这似乎是一句吃不到葡萄说葡萄酸的话，说这句话的人，大多数会被认为是懒惰的，因为他们对待学习不努力以及不思进取所以才会抱怨考试无聊，表示自己其实有学习的能力，只不过不愿意学罢了。在我上大学之前，我也是这么认为的。作为一名中流985大学的学生，我甚至可以说我是考试的受益者，毕竟我也是通过高考选拔上来的。
然而，上了大学，我发现一切都变了，大部分的考试变得无趣又无意义，甚至许多课程本身就毫无意义可言，一门毫无意义的课程，却占着很高的学分，毕业和保研的命脉掌握在它们的手中，你不去学就意味着你就冒着挂科的风险，一旦有一门挂科，就意味着大部分的评奖评优和保研完全没戏了。
虽然一直对大学的课程不太满意，但真正使我决定写下这篇文章的是在我复习《算法设计与分析》这门课的时候。作为一门实践性很强的科目，上课的时候居然连一些实践的作业都没有，唯一的实践机会是在小组组队实现算法的时候。而在我复习的时候在做往年试卷的时候，其中有一道题是，用两种状态空间树的方法来表示回溯法和分支限界法的解空间，我当时是极其愤怒的，这种题目，不就像是孔乙己在问别人，茴字的写法有几种吗？像这种无聊又无用的题目在不同 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/2/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/4/"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/KuangjuX.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">KuangjuX</div><div class="author-info__description">狂且的人文及技术博客</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">57</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">40</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">8</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/KuangjuX"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/KuangjuX" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/zhjyyjjmjy666@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div></div><div class="card-widget card-announcement"><div class="card-content"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>Announcement</span></div><div class="announcement_content">风声雨声读书声，声声入耳 </br> 家事国事天下事，事事关心</div></div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/10/22/%E9%A3%9E%E4%B9%A6Rust%E5%AE%9E%E4%B9%A0%E9%9D%A2%E8%AF%95/" title="飞书Rust实习面试"><img src="https://github.com/KuangjuX/Blog-Images/blob/main/Lark_Suite_Logo.png?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="飞书Rust实习面试"/></a><div class="content"><a class="title" href="/2021/10/22/%E9%A3%9E%E4%B9%A6Rust%E5%AE%9E%E4%B9%A0%E9%9D%A2%E8%AF%95/" title="飞书Rust实习面试">飞书Rust实习面试</a><time datetime="2021-10-22T11:25:35.000Z" title="Created 2021-10-22 19:25:35">2021-10-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/10/19/Rust%E5%B9%B6%E5%8F%91%E5%AE%89%E5%85%A8%E6%80%BB%E7%BB%93/" title="Rust并发安全总结"><img src="https://github.com/KuangjuX/Blog-Images/blob/main/Rust.png?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Rust并发安全总结"/></a><div class="content"><a class="title" href="/2021/10/19/Rust%E5%B9%B6%E5%8F%91%E5%AE%89%E5%85%A8%E6%80%BB%E7%BB%93/" title="Rust并发安全总结">Rust并发安全总结</a><time datetime="2021-10-19T14:55:46.000Z" title="Created 2021-10-19 22:55:46">2021-10-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/10/19/Rust-String/" title="Rust String 用法总结"><img src="https://github.com/KuangjuX/Blog-Images/blob/main/Rust.png?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Rust String 用法总结"/></a><div class="content"><a class="title" href="/2021/10/19/Rust-String/" title="Rust String 用法总结">Rust String 用法总结</a><time datetime="2021-10-19T07:25:02.000Z" title="Created 2021-10-19 15:25:02">2021-10-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/10/16/6-824-Lab2A/" title="6.824 Lab2 Leader Election"><img src="https://github.com/KuangjuX/Blog-Images/blob/main/Raft.png?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="6.824 Lab2 Leader Election"/></a><div class="content"><a class="title" href="/2021/10/16/6-824-Lab2A/" title="6.824 Lab2 Leader Election">6.824 Lab2 Leader Election</a><time datetime="2021-10-16T13:43:26.000Z" title="Created 2021-10-16 21:43:26">2021-10-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/10/16/6-824-MapReduce/" title="6.824 MapReduce"><img src="https://github.com/KuangjuX/Blog-Images/blob/main/MapReduce.png?raw=true" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="6.824 MapReduce"/></a><div class="content"><a class="title" href="/2021/10/16/6-824-MapReduce/" title="6.824 MapReduce">6.824 MapReduce</a><time datetime="2021-10-16T13:43:13.000Z" title="Created 2021-10-16 21:43:13">2021-10-16</time></div></div></div></div></div><div class="card-widget card-categories"><div class="card-content"><div class="item-headline"><i class="fas fa-folder-open"></i><span>Categories</span></div><ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Rust/"><span class="card-category-list-name">Rust</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%8E%86%E5%8F%B2/"><span class="card-category-list-name">历史</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%B0%8F%E8%AF%B4/"><span class="card-category-list-name">小说</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%8A%80%E6%9C%AF/"><span class="card-category-list-name">技术</span><span class="card-category-list-count">37</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%97%85%E8%A1%8C/"><span class="card-category-list-name">旅行</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%9D%82%E6%96%87/"><span class="card-category-list-name">杂文</span><span class="card-category-list-count">8</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E7%94%B5%E5%BD%B1/"><span class="card-category-list-name">电影</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E8%AF%BB%E4%B9%A6/"><span class="card-category-list-name">读书</span><span class="card-category-list-count">3</span></a></li>
            
            </ul></div></div><div class="card-widget card-tags"><div class="card-content"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/6-824/" style="font-size: 1.14em; color: #999b9d">6.824</a> <a href="/tags/ARM/" style="font-size: 1.1em; color: #999">ARM</a> <a href="/tags/C-C/" style="font-size: 1.38em; color: #99a4b4">C/C++</a> <a href="/tags/CPU/" style="font-size: 1.1em; color: #999">CPU</a> <a href="/tags/CSAPP/" style="font-size: 1.34em; color: #99a3b0">CSAPP</a> <a href="/tags/Docker/" style="font-size: 1.1em; color: #999">Docker</a> <a href="/tags/Javascript/" style="font-size: 1.1em; color: #999">Javascript</a> <a href="/tags/Laravel/" style="font-size: 1.14em; color: #999b9d">Laravel</a> <a href="/tags/Leetcode/" style="font-size: 1.26em; color: #999fa8">Leetcode</a> <a href="/tags/Linux/" style="font-size: 1.22em; color: #999ea4">Linux</a> <a href="/tags/MIPS/" style="font-size: 1.1em; color: #999">MIPS</a> <a href="/tags/Nginx/" style="font-size: 1.1em; color: #999">Nginx</a> <a href="/tags/PHP/" style="font-size: 1.1em; color: #999">PHP</a> <a href="/tags/RISC-V/" style="font-size: 1.42em; color: #99a6b7">RISC -V</a> <a href="/tags/Rust/" style="font-size: 1.5em; color: #99a9bf">Rust</a> <a href="/tags/go/" style="font-size: 1.14em; color: #999b9d">go</a> <a href="/tags/leetcode/" style="font-size: 1.1em; color: #999">leetcode</a> <a href="/tags/rCore/" style="font-size: 1.3em; color: #99a1ac">rCore</a> <a href="/tags/xv6-rust/" style="font-size: 1.18em; color: #999ca1">xv6-rust</a> <a href="/tags/%E4%BA%BA%E7%94%9F/" style="font-size: 1.38em; color: #99a4b4">人生</a> <a href="/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" style="font-size: 1.1em; color: #999">函数式编程</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/" style="font-size: 1.14em; color: #999b9d">分布式系统</a> <a href="/tags/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/" style="font-size: 1.26em; color: #999fa8">后端开发</a> <a href="/tags/%E5%90%90%E6%A7%BD/" style="font-size: 1.14em; color: #999b9d">吐槽</a> <a href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F/" style="font-size: 1.1em; color: #999">嵌入式系统</a> <a href="/tags/%E5%B9%B6%E5%8F%91/" style="font-size: 1.1em; color: #999">并发</a> <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 1.46em; color: #99a7bb">操作系统</a> <a href="/tags/%E6%95%99%E8%82%B2/" style="font-size: 1.1em; color: #999">教育</a> <a href="/tags/%E6%96%87%E5%AD%A6/" style="font-size: 1.22em; color: #999ea4">文学</a> <a href="/tags/%E6%97%85%E8%A1%8C/" style="font-size: 1.1em; color: #999">旅行</a> <a href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 1.18em; color: #999ca1">服务器</a> <a href="/tags/%E6%9D%82%E8%AE%BA/" style="font-size: 1.22em; color: #999ea4">杂论</a> <a href="/tags/%E6%B1%87%E7%BC%96/" style="font-size: 1.18em; color: #999ca1">汇编</a> <a href="/tags/%E7%88%B1%E5%9B%BD/" style="font-size: 1.1em; color: #999">爱国</a> <a href="/tags/%E7%88%B1%E6%83%85/" style="font-size: 1.3em; color: #99a1ac">爱情</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.26em; color: #999fa8">算法</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/" style="font-size: 1.1em; color: #999">计算机体系结构</a> <a href="/tags/%E9%87%8D%E6%9E%84/" style="font-size: 1.1em; color: #999">重构</a> <a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 1.1em; color: #999">面试</a> <a href="/tags/%E9%AD%8F%E6%99%8B/" style="font-size: 1.1em; color: #999">魏晋</a></div></div></div><div class="card-widget card-archives"><div class="card-content"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/10/"><span class="card-archive-list-date">October 2021</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/07/"><span class="card-archive-list-date">July 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/06/"><span class="card-archive-list-date">June 2021</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/05/"><span class="card-archive-list-date">May 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/04/"><span class="card-archive-list-date">April 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/02/"><span class="card-archive-list-date">February 2021</span><span class="card-archive-list-count">11</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/01/"><span class="card-archive-list-date">January 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/12/"><span class="card-archive-list-date">December 2020</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item more is-center"><a class="card-archive-list-link-more" href="/archives/">
              <span>More</span><i class="fas fa-angle-right"  ></i></a></li></ul></div></div><div class="card-widget card-webinfo"><div class="card-content"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">57</div></div><div class="webinfo-item"><div class="item-name">UV :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">PV :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2021-10-22T13:28:15.400Z"></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By KuangjuX</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="icp"><a><img class="icp-icon" src="/img/icp.png" alt="ICP"/><span>津ICP备20003770号</span></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><div class="js-pjax"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></div><!-- hexo-inject:begin --><!-- hexo-inject:end --></body></html>